
<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <title>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ</title>
    <link rel="stylesheet" href="./assets/style.css">
    <script src="./assets/index.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</h1>
      <div>
        <label>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ: <input id="income" type="number" /></label><br/>
        <label><input id="spouse" type="checkbox" /> ‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</label><br/>
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏∏‡∏ï‡∏£: <input id="children" type="number" /></label><br/>
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà: <input id="parents" type="number" /></label><br/>
        <label>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û/‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï: <input id="insurance" type="number" /></label><br/>
        <label>‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ö‡πâ‡∏≤‡∏ô: <input id="loan" type="number" /></label><br/>
        <label>‡∏•‡∏á‡∏ó‡∏∏‡∏ô RMF/SSF: <input id="invest" type="number" /></label><br/>
        <label>‡πÄ‡∏á‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ: <input id="donate" type="number" /></label><br/>
        <button onclick="calculateTax()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ</button>
      </div>
      <div id="result" class="result"></div>
    </div>
  </body>
</html>



<script>

  window.calculateTax = function () {
  const income = +document.getElementById("income").value;
  const spouse = document.getElementById("spouse").checked;
  const children = +document.getElementById("children").value || 0;
  const parents = +document.getElementById("parents").value || 0;
  const insurance = +document.getElementById("insurance").value || 0;
  const loan = +document.getElementById("loan").value || 0;
  const invest = +document.getElementById("invest").value || 0;
  const donate = +document.getElementById("donate").value || 0;

  const personal = 60000;
  const spouseDeduct = spouse ? 60000 : 0;
  const childrenDeduct = children * 30000;
  const parentDeduct = parents * 30000;
  const expense = income * 0.5;

  const totalDeduct = personal + spouseDeduct + childrenDeduct + parentDeduct + insurance + loan + invest + donate + expense;
  const taxable = Math.max(income - totalDeduct, 0);

  const brackets = [
    { limit: 150000, rate: 0 },
    { limit: 150000, rate: 0.05 },
    { limit: 200000, rate: 0.1 },
    { limit: 250000, rate: 0.15 },
    { limit: 250000, rate: 0.2 },
    { limit: 1000000, rate: 0.25 },
    { limit: 2000000, rate: 0.3 },
    { limit: Infinity, rate: 0.35 }
  ];

  let tax = 0;
  let remain = taxable;
  let breakdown = "";

  for (let b of brackets) {
    const amt = Math.min(b.limit, remain);
    const t = amt * b.rate;
    if (amt > 0) {
      breakdown += `<div>‡∏ä‡πà‡∏ß‡∏á ${amt.toLocaleString()} ‡∏ö‡∏≤‡∏ó x ${(b.rate * 100).toFixed(0)}% = ${t.toLocaleString()} ‡∏ö‡∏≤‡∏ó</div>`;
    }
    tax += t;
    remain -= amt;
    if (remain <= 0) break;
  }

  document.getElementById("result").innerHTML = `
    <h3>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h3>
    <p>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: <strong>${taxable.toLocaleString()}</strong> ‡∏ö‡∏≤‡∏ó</p>
    <p>‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢: <strong>${tax.toLocaleString()}</strong> ‡∏ö‡∏≤‡∏ó</p>
    

    let adviceMsg = [];
    if (investment < 100000) adviceMsg.push("üìà ‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô RMF/SSF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏†‡∏≤‡∏©‡∏µ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô");
    if (donation < 100000) adviceMsg.push("‚ù§Ô∏è ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏∏‡∏®‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô");
    if (!spouse) adviceMsg.push("üë©‚Äç‚ù§Ô∏è‚Äçüë® ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ");
    if (insurance < 100000) adviceMsg.push("üè• ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï/‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ñ‡∏∂‡∏á 100,000 ‡∏ö‡∏≤‡∏ó");

    setAdvice(adviceMsg);
    
    <div>${breakdown}</div>
  `;
}
</script>
